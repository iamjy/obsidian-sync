---
title: 부팅 시간 단축
source:
author:
  - "[[@_louis]]"
published:
created: 2025-10-16
description: 부팅 시간 단축
tags:
  - boot-time
---
### 라즈베리파이 CM4 부팅 시간 최적화 과정 요약

#### **🎯 최종 목표**

Raspberry Pi CM4에서 USB 가젯 모드만 사용하는 것을 전제로, 불필요한 모든 기능을 비활성화하여 부팅 시간을 최대한 단축합니다.

---

#### **1. 1단계: 하드웨어 블록 비활성화**

- **요청**: 공식 매뉴얼을 기반으로 네트워크, 무선 통신 등 불필요한 하드웨어 비활성화 방법을 문의했습니다.
    
- **해결**: `/boot/config.txt` 파일을 수정하여 다음 하드웨어들을 비활성화했습니다.
    
    - 블루투스 (`dtoverlay=disable-bt`)
    - Wi-Fi (`dtoverlay=disable-wifi`)
    - 이더넷 (`dtoverlay=disable-ethernet`)
    - 오디오 (`dtparam=audio=off`)
    - 부팅 스플래시 스크린 및 부팅 딜레이 제거
        
---

#### **2. 2단계: 관련 `systemd` 서비스 비활성화**

- **요청**: 1단계에서 비활성화한 하드웨어와 관련된 소프트웨어 서비스(`systemd`) 비활성화 방법을 문의했습니다.
    
- **해결**: `sudo systemctl disable <서비스이름>` 명령어를 통해 다음 서비스들을 비활성화했습니다.
    
    - **블루투스**: `bluetooth.service`, `hciuart.service`
    - **Wi-Fi**: `wpa_supplicant.service`
    - **네트워크**: `dhcpcd.service`
    - **오디오**: `alsa-state.service`
        

---

#### **3. 3단계: `cloud-init` 부팅 지연 문제 해결**

- **문제 제기**: 부팅 로그에서 `cloud-init init-local` 서비스가 많은 시간을 소요하는 것을 발견했습니다.
    
- **해결**: `cloud-init`은 클라우드 환경 초기 설정을 위한 도구로, 로컬 환경에서는 불필요하게 네트워크 소스를 기다리며 부팅을 지연시키는 원인이었습니다. 아래 명령어로 간단히 비활성화하여 문제를 해결했습니다.
    
    Bash
    
    ```
    sudo touch /etc/cloud/cloud-init.disabled
    ```
    

---

#### **4. 4단계: `systemd-analyze`를 통한 심층 분석 및 최적화**

- **분석**: `systemd-analyze blame`과 `systemd-analyze critical-chain` 명령어를 사용하여 부팅 시간의 병목 현상을 분석했습니다.
    
- **확인된 주요 원인**:
    
    - **`NetworkManager.service`**: 로컬 네트워크 SSH 접속을 위해 남겨둔 이 서비스가 부팅 시간의 **절대적인 비중(약 2.7초)**을 차지하며, 다른 모든 서비스가 네트워크를 기다리게 만드는 **핵심 병목(critical-chain) 현상의 원인**임이 확인되었습니다.
        
- **추가 최적화**: SSH 접속을 유지하는 선에서 다음과 같은 부가 서비스들을 비활성화했습니다.
    
    - `keyboard-setup.service`
    - `rpi-resize-swap-file.service`
    - `ModemManager.service`
    - `avahi-daemon.service`
        
---

### **💡 최종 결론**

현재 시스템은 **SSH 원격 접속 기능을 유지하는 상태에서는 거의 최적화된 상태**입니다.

부팅 속도를 최고 수준으로 끌어올리기 위한 마지막 단계는 **"SSH 접속의 편리함"**을 포기하고 아래 명령어로 네트워크 관련 서비스를 완전히 비활성화하는 것입니다. 이는 모든 개발 및 설정이 완료된 후, 최종적으로 제품을 독립적인 USB 장치로 사용할 때 선택할 수 있는 옵션입니다.

Bash

```
# 부팅 속도를 극대화하기 위한 최종 단계 (SSH 접속 불가)
sudo systemctl disable --now NetworkManager.service
sudo systemctl disable --now ssh.service
```