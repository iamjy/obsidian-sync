---
title:
source:
author:
published:
created: 2025-09-07
description:
tags:
---

AI Camera System ( ACS ) 제품 개발

사용자 요구사항

|No.|Name||Function|Description|Define|
|---|---|---|---|---|---|
|1|Video - VIS|Data|VIS 영상 스트림|ACS의 VIS 카메라 영상을 iPad에 실시간으로 제공하여 시술 부위와 Handpiece 움직임을 참고용으로 보여준다.|RGB 영상 전송|
|2|Video - IR|Data|열영상(IR) 스트림|피부 표면의 온도 분포를 시각화하기 위해 IR 카메라 영상을 iPad에 제공한다.|Thermal 영상 전송|
|3|Video - Fused|Data|VIS-IR 정합 영상|VIS와 IR를 정합한 오버레이 영상을 iPad에 제공하여, 높은 온도 영역을 시각적으로 표시한다.|Overlay, 화각에 따른 미표시 영역 발생시 Crop|
|4|Thermal Summary|Data|부위별 온도 요약 정보|각 Zone의 평균/최대 온도를 주기적으로 iPad에 전달하여 온도 상태를 모니터링할 수 있게 한다.|1초 주기 이하|
|5|Thermal Alarm|Info.|화상 위험(고온) 알람 이벤트|Zone 온도가 설정된 임계값을 초과했을 때, 화상 위험을 알리는 이벤트를 iPad에 전달한다.|Set Info.|
|6|Device Info|Info.|장비 정보 및 기능 지원 여부|ACS의 모델, 펌웨어 버전, 지원 기능을 iPad에 알려준다.|Control Protocol 정의 필요|
|7|Stream Info|Info.|영상 스트림 접속 정보|VIS/IR 스트림을 받을 수 있는 RTSP/기타 URL을 iPad에 알려준다.|RTSP IP Info.(Port no 554)|
|8|Heartbeat/Status|Info.|연결 상태 및 간단한 시스템 상태|ACS가 살아있고 통신이 유지되고 있음을 알리는 신호.|H.beat Info.|
|9|Plan Summary|Info.|Plan 요약 정보 전달|이번 세션에서 사용할 Zone 목록, 이름, 기본 안전 파라미터를 ACS에 전달한다.|Set Info.|
|10|Session Control|Control|세션 시작 명령|iPad에서 현재 환자/Plan으로 시술 세션을 시작하라고 ACS에 지시한다.|Op Command|
|11|Session Control|Control|세션 종료 명령|현재 세션을 종료하고 로그/센서 처리를 마무리하라고 ACS에 지시한다.|Op Command|
|12|Zone Control|Control|현재 Zone 선택 명령|의사가 iPad에서 선택한 현재 시술 부위를 ACS에 알려준다.|Set Command|
|13|Safety Config|Control|온도 임계값 설정|환자 피부 타입/Plan에 따라 Zone별 온도 상한값을 ACS에 설정한다.|Set Command|
|14|Quality Mode|Control|영상 품질 모드 설정|네트워크 상태 등에 따라 Normal/Low 등 영상 품질 프로파일을 ACS에 설정한다.|Auto negotiation|
|15|Device Status|Control|장비 상태 조회 요청|ACS의 현재 상태(센서 연결, 온도, 네트워크 등)를 요청한다.|Sta. Request|
|16|Time Sync|Control|시간 동기화 명령|iPad 기준 시간을 ACS에 전달하여 이벤트/로그 타임스탬프를 정렬한다.|Network Time Sync.|
|17|Calibration|Control|캘리브레이션 시작 명령|VIS-IR 정합 또는 카메라 캘리브레이션 절차를 시작하라고 ACS에 지시한다.|Cal. Command|
|18|Hello/Pairing|Control|연결 및 페어링 인사|iPad가 ACS에 연결되었음을 알리고, 앱 버전/사용자 정보를 전달한다.|Con. Command|

---

| No. | Name            | Function | Description          | Define              |
| --- | --------------- | -------- | -------------------- | ------------------- |
| 1   | Video - VIS     | Data     | 실시간 VIS 카메라 영상       | RGB 영상 전송           |
| 2   | Video Summary   | Data     | 열영상 비교               | Thermal 영상 전송       |
| 3   | Video - Fused   | Data     | VIS/IR 조합 영상         | IR 영상에 Thermal 오버레이 |
| 4   | Thermal Summary | Data     | 주변 온도/Zone 비교        | -                   |
| 5   | Alarm           | Info     | 안전 위험 알림             | -                   |
| 6   | Device Info     | Info     | 장비 정보 (모델, 펌웨어 등)    | -                   |
| 7   | Stream Info     | Info     | 영상 스트림 정보 (RTSP URL) | 포트 554              |
| 8   | Heartbeat       | Info     | 연결 상태 확인             | -                   |
| 9   | Plan Summary    | Info     | 세션 Zone 정보           | -                   |
| 10  | Session Control | Control  | 세션 시작/종료 명령          | -                   |
| 11  | Alarm           | Control  | 위험 알람 설정             | -                   |
| 12  | ROI Control     | Control  | 관심 영역 제어             | -                   |
| 13  | Device Info     | Device   | 장비 정보                | -                   |

---

소프트웨어 요구사항 도출

- **실시간 비디오 스트리밍 및 표시:** VIS 및 IR 카메라 피드를 지원합니다.
- **열 데이터 오버레이:** IR 데이터를 VIS 스트림과 결합합니다.
- **온도 측정 및 매핑:** 온도 분포를 표시합니다.
- **경보:** 온도 임계값을 기반으로 경보를 트리거합니다.
- **장치 통신 및 구성:** 카메라 설정을 제어합니다.
- **사용자 인터페이스:** 비디오, 열 데이터 및 경보를 직관적으로 표시합니다.
- **데이터 로깅:** 검토를 위해 온도 데이터를 저장합니다.

---

개발 과정을 관리할 수 있는 단계로 나누고 각 단계에서 필요한 작업을 정리한다.
이는 보다 실질적인 개발 로드맵을 제공한다.
 명확성을 위해 작업을 범주별로 나눈다. ( 예: 설정, 핵심 기능, UI / UX, 테스트 )

**1단계: 설정 및 인프라 구축 (예상 시간: 2주)**

1.  개발 환경 설정: 개발 도구, IDE, 버전 관리 시스템 ( 예: Git ) 설정.
2.  통신 프로토콜 정의: 카메라 하드웨어와의 통신 프로토콜 ( 예: TCP/IP, UDP ) 정의.
3.  카메라 API 통합: 카메라 API를 통합하여 통신을 설정하고 비디오 스트림을 수신.
4.  기본 비디오 디코딩: 원시 비디오 프레임을 수신하고 표시하기 위한 기본 비디오 디코딩 기능 구현.

**2단계: 핵심 기능 구현 (예상 시간: 4-6주)**

5.  실시간 비디오 스트리밍: VIS 및 IR 카메라에서 실시간 비디오 스트리밍 구현.
6.  열 데이터 획득: IR 카메라에서 열 데이터 획득 통합.
7.  온도 매핑 구현: 온도 분포를 시각화하기 위한 온도 매핑 기능 구현.
8.  데이터 융합 구현: 열 데이터를 VIS 이미지에 오버레이하기 위한 데이터 융합 구현.
9.  알람 로직 구현: 온도 임계값에 따라 알람을 트리거하기 위한 알람 로직 구현.
10. 데이터 로깅 구현: 온도 데이터를 기록하기 위한 데이터 로깅 기능 구현.

**3단계: UI/UX 개발 (예상 시간: 3-4주)**

11. 사용자 인터페이스 디자인: 비디오 스트림, 열 데이터 및 알람을 표시하기 위한 사용자 친화적인 인터페이스 디자인.
12. 비디오 표시 구현: 실시간 비디오 피드를 표시하기 위한 비디오 표시 구성 요소 구현.
13. 열 데이터 시각화 구현: 온도 매핑을 표시하기 위한 열 데이터 시각화 구성 요소 구현.
14. 알람 알림 구현: 시각적 및 청각적 알림으로 알람 알림 기능 구현.
15. 구성 인터페이스 개발: 카메라 설정, 알람 임계값 및 로깅 옵션을 위한 구성 인터페이스 개발.

**4단계: 테스트 및 개선 (예상 시간: 2-3주)**

1. 단위 테스트: 올바른 동작을 위해 개별 구성 요소 및 기능 테스트.
2. 통합 테스트: 원활한 작동을 보장하기 위해 모든 구성 요소의 통합 테스트.
3. 시스템 테스트: 모든 사용자 요구 사항을 충족하는지 확인하기 위해 전체 시스템 테스트.
4. 사용자 수용 테스트 (UAT): 피드백 수집 및 개선 영역 식별을 위해 최종 사용자 참여 테스트.
5. 성능 최적화: 성능 및 응답성 최적화.
6. 버그 수정 및 개선: 테스트 및 개선 과정에서 식별된 모든 버그 또는 문제 해결.

---

**I. 카메라 측 (하드웨어 & 펌웨어)**

1. **이미지 센서 캡처:** 카메라의 이미지 센서가 원본 비디오 프레임을 캡처합니다.
2. **비디오 인코딩:** 캡처된 프레임은 대역폭을 줄이기 위해 비디오 코덱(H.264 또는 H.265 등)을 사용하여 인코딩됩니다. 일반적으로 카메라 하드웨어의 전용 프로세서에서 수행됩니다.
3. **WiFi 연결:** 카메라가 네트워크에 WiFi 연결을 설정합니다. WiFi 액세스 포인트에 연결하고 IP 주소를 얻는 과정이 포함됩니다.
4. **RTSP/RTP 서버 설정 (또는 유사):** 카메라는 스트리밍 서버(종종 RTSP - Real Time Streaming Protocol, 실제 스트림은 RTP - Real-time Transport Protocol을 사용)를 실행합니다. 이 서버는 iPad 앱의 스트리밍 요청을 처리합니다. 일부 카메라는 WebRTC와 같은 다른 프로토콜을 사용할 수 있습니다.
5. **스트림 광고 (선택 사항):** 카메라는 네트워크에 스트림을 광고하여 iPad 앱이 쉽게 찾을 수 있도록 할 수 있습니다.
6. **데이터 전송:** 인코딩된 비디오 스트림은 선택한 프로토콜(예: RTSP/RTP)을 사용하여 WiFi를 통해 전송됩니다.

**II. iPad 앱 측 (소프트웨어)**

1. **네트워크 검색 (선택 사항):** 카메라가 스트림을 광고하는 경우 앱은 네트워크에서 검색합니다.
2. **수동 IP 주소 입력 (대안):** 카메라가 광고하지 않는 경우 앱은 사용자가 카메라의 IP 주소와 포트 번호를 수동으로 입력하도록 요구할 수 있습니다.
3. **연결 설정:** 앱은 카메라의 스트리밍 서버(RTSP 서버 등)에 연결을 설정합니다. 여기에는 카메라에 요청을 보내고 필요한 경우 인증하는 과정이 포함됩니다.
4. **스트림 요청:** 앱은 카메라에 비디오 스트림을 시작하도록 요청합니다.
5. **데이터 수신:** 앱은 WiFi를 통해 인코딩된 비디오 스트림을 수신합니다.
6. **비디오 디코딩:** 앱은 호환되는 비디오 코덱(H.264, H.265 등)을 사용하여 수신된 비디오 스트림을 디코딩합니다.
7. **비디오 렌더링:** 디코딩된 비디오 프레임은 iPad 화면에 표시되도록 렌더링됩니다.
8. **버퍼링 및 네트워크 문제 처리:** 앱은 잠재적인 네트워크 변동을 처리하고 부드러운 재생을 보장하기 위해 버퍼링 메커니즘을 구현합니다. 연결 끊김 및 스트림 중단에 대한 오류 처리가 중요합니다.
9. **UI 컨트롤 (선택 사항):** 앱은 재생 설정, 카메라 줌 및 기타 매개변수를 조정하기 위한 UI 컨트롤을 제공할 수 있습니다.

**핵심 고려 사항 및 기술:**

- **비디오 코덱:** H.264 및 H.265는 실시간 스트리밍을 위한 일반적이고 효율적인 코덱입니다.
- **스트리밍 프로토콜:** RTSP, RTP, WebRTC 및 HTTP 라이브 스트리밍(HLS)이 일반적으로 사용됩니다.
- **네트워크 조건:** 네트워크 지연, 대역폭 제한 및 패킷 손실을 관리하는 것이 중요합니다. 적응형 비트 전송률 스트리밍이 도움이 될 수 있습니다.
- **보안:** 무단 액세스를 방지하기 위해 비디오 스트림을 암호화하는 것을 고려하십시오.
- **전력 소비:** 비디오 스트리밍은 전력을 많이 소비할 수 있습니다. 인코딩 및 전송 프로세스를 최적화하면 전력 소비를 줄이는 데 도움이 될 수 있습니다.

---

**데이터 형식 추천:**

이 시나리오에 가장 적합한 데이터 형식은 **JSON (JavaScript Object Notation)**입니다. 그 이유는 다음과 같습니다.

*   **사람이 읽기 쉬움:** 이해하고 디버깅하기 쉽습니다.
*   **경량:** 오버헤드가 최소화되어 대역폭 사용량을 줄입니다.
*   **널리 지원됨:** 거의 모든 프로그래밍 언어(iPad 앱용 Swift, 카메라 펌웨어용 C++ 또는 Python 등)에서 JSON 파서가 제공됩니다.
*   **유연함:** 다양한 데이터 유형(숫자, 문자열, 부울, 배열, 중첩 객체)을 쉽게 수용할 수 있습니다.

**JSON 페이로드 예시:**

```json
{
  "timestamp": "2024-10-27T10:30:00Z",
  "temperature": 25.5,
  "temperature_unit": "C",
  "humidity": 60.2,
  "alert_type": "temperature_high",
  "alert_message": "온도가 임계값을 초과했습니다!",
  "control_state": {
    "fan_speed": "medium",
    "heater_enabled": true
  }
}
```

**협업 단계: 단계별 접근 방식:**

**1단계: 데이터 스키마 정의 (1-2주)**

1.  **공동 요구 사항 수집:** 카메라 펌웨어 팀과 iPad 앱 팀이 교환해야 할 모든 데이터를 정의하기 위해 협력해야 합니다. 여기에는 온도, 습도, 경고, 제어 상태 및 잠재적인 미래 데이터 포인트가 포함됩니다.
2.  **JSON 스키마 생성:** 각 데이터 요소의 데이터 유형, 허용 값 및 필수 필드를 지정하는 자세한 JSON 스키마를 설계합니다. (JSON 스키마 편집기와 같은 도구를 사용할 수 있습니다.)
3.  **스키마 유효성 검사:** 양 팀은 스키마에 동의해야 합니다. 카메라 측(데이터를 보내기 전에 올바르게 포맷되었는지 확인)과 iPad 앱 측(수신된 데이터가 유효한지 확인) 모두에서 스키마 유효성 검사를 구현합니다.

**2단계: 통신 프로토콜 설계 (1-2주)**

1.  **전송 계층 선택:** 통신 프로토콜을 선택합니다. 옵션은 다음과 같습니다.
    *   **WebSocket:** 실시간 양방향 통신에 권장됩니다.
    *   **MQTT (Message Queuing Telemetry Transport):** 사물 인터넷 시나리오에 적합하며 경량 메시징을 제공합니다.
    *   **HTTP (RESTful API):** 기본 요청/응답 통신에 간단합니다.
2.  **메시지 구조:** 교환할 메시지의 구조를 정의합니다. 여기에는 헤더(예: 메시지 유형, 시퀀스 번호) 및 JSON 페이로드가 포함됩니다.
3.  **오류 처리:** 오류가 처리되는 방식을 정의합니다(예: 오류 코드, 재시도 메커니즘).

**3단계: 구현 및 테스트 (4-6주)**

1.  **카메라 펌웨어 개발:** 카메라 측에서 데이터 인코딩 및 전송 로직을 구현합니다.
2.  **iPad 앱 개발:** iPad 앱 측에서 데이터 수신 및 파싱 로직을 개발합니다.
3.  **유닛 테스트:** 각 측에서 개별 구성 요소를 테스트합니다.
4.  **통합 테스트:** 카메라와 iPad 앱 간의 엔드 투 엔드 통신을 테스트합니다.
5.  **성능 테스트:** 통신의 지연 시간 및 처리량을 측정합니다.
6.  **사용성 테스트:** iPad 앱에서 데이터가 표시되고 컨트롤이 제대로 작동하는지 확인합니다.

**4단계: 문서화 및 유지 관리 (지속적)**

1.  **API 문서화:** 데이터 형식, 통신 프로토콜 및 오류 처리 메커니즘을 설명하는 명확한 API 문서를 만듭니다.
2.  **버전 관리:** 데이터 형식 및 통신 프로토콜의 변경 사항을 추적하기 위해 버전 관리(예: Git)를 사용합니다.
3.  **지속적인 유지 관리:** 배포 후 발생하는 모든 버그 또는 문제를 해결합니다. 필요한 경우 새로운 기능이나 데이터 포인트를 추가하는 것을 고려합니다.

**협업을 돕는 도구:**

*   **Swagger/OpenAPI:** RESTful API 정의 및 문서화를 위한 도구입니다.
*   **JSON 스키마 편집기:** JSON 스키마 생성 및 유효성 검사를 위한 도구입니다.
*   **Postman/Insomnia:** API 테스트를 위한 도구입니다.
*   **Git/GitHub/GitLab:** 버전 관리 및 협업을 위한 도구입니다.
*   **통신 플랫폼:** Slack, Microsoft Teams 또는 유사한 도구를 사용하여 실시간 통신을 합니다.

이러한 단계별 접근 방식을 따르고 적절한 도구를 사용하면 카메라와 iPad 앱 팀이 안정적이고 기능이 풍부한 통신 시스템을 만들기 위해 효과적으로 협업할 수 있습니다.

---

